<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Stats & Charts</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#4a90d9">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Stats">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="192x192" href="icon-192.png">
</head>
<body>
  <div class="title-row">
    <h1>Stats & Charts</h1>
    <button id="dark-toggle" class="dark-toggle" aria-label="Toggle dark mode">
      <span class="sun-icon">‚òÄÔ∏è</span>
      <span class="moon-icon">üåô</span>
    </button>
  </div>

  <div class="card">
    <div class="dataset-tabs-row">
      <div id="dataset-tabs" class="dataset-tabs"></div>
      <button class="pill-btn pill-btn-small" id="add-dataset-btn" title="New dataset">+</button>
    </div>
    <h2>Data Input</h2>
    <div class="grid-toolbar">
      <button class="pill-btn" id="add-col-btn">+ Column</button>
      <button class="pill-btn" id="add-row-btn">+ Row</button>
      <button class="pill-btn pill-btn-danger" id="clear-btn">Clear</button>
      <button class="pill-btn" id="test-data-btn" style="color:#34c759">Test Data</button>
      <button class="pill-btn" id="add-formula-btn" title="Add formula column">fx</button>
      <span class="toolbar-spacer"></span>
      <button class="pill-btn" id="undo-btn" title="Undo (Ctrl+Z)">‚Ü© Undo</button>
      <button class="pill-btn" id="redo-btn" title="Redo (Ctrl+Shift+Z)">‚Ü™ Redo</button>
    </div>
    <div id="grid-wrapper">
      <table id="data-grid">
        <thead><tr></tr></thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="csv-upload-row">
      <label>Upload CSV: <input type="file" id="csv-upload" accept=".csv,.tsv,.txt"></label>
    </div>
    <button id="analyze-btn">Analyze <span id="invalid-badge" class="invalid-badge hidden"></span></button>
  </div>

  <div id="charts-section" class="card hidden">
    <div class="charts-header">
      <h2>Charts</h2>
      <div class="charts-header-actions">
        <button class="pill-btn" id="export-csv-btn">Export CSV</button>
        <button class="pill-btn" id="export-png-btn">Export PNG</button>
        <button class="pill-btn" id="add-chart-btn">+ Add Chart</button>
      </div>
    </div>
    <div id="charts-container"></div>
  </div>

  <div id="stats-section" class="card hidden">
    <h2>Descriptive Statistics</h2>
    <div id="stats-grid" class="stats-grid"></div>
  </div>

  <div id="group-stats-section" class="card hidden">
    <h2>Descriptive Statistics by Group</h2>
    <div id="group-stats-content"></div>
  </div>

  <div id="insights-section" class="card hidden">
    <h2>Summary Insights</h2>
    <div id="insights-content"></div>
  </div>

  <div id="correlation-section" class="card hidden">
    <h2>Correlation Matrix</h2>
    <div id="correlation-content"></div>
  </div>

  <div id="hypothesis-section" class="card hidden">
    <h2>Hypothesis Testing</h2>
    <div id="hypothesis-content"></div>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
